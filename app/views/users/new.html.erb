<%= form_for(@user, :url=>{:controller =>'users', :action=>'create'}, :html => { :class => 'form-horizontal' }) do |f| %>

  <div class="control-group">
    <%= f.label :first, :class => 'control-label' %>
    <div class="controls">
      <%= f.text_field :first, :class => 'text_field' %>
    </div>
  </div>

  <div class="control-group">
    <%= f.label :last, :class => 'control-label' %>
    <div class="controls">
      <%= f.text_field :last, :class => 'text_field' %>
    </div>
  </div>

  <div class="control-group">
    <%= f.label :email, :class => 'control-label' %>
    <div class="controls">
      <%= f.email_field :email, :class => 'text_field' %>
    </div>
  </div>

  <div class="control-group">
    <%= f.label :secrate_code, :class => 'control-label' %>
    <div class="controls">
      <%= select(:secrate_code, :secrate_code, SecrateCode.where(:user_id=>nil).collect {|u| [u.secrate_code, u.id]}, :prompt => 'Select', :class => 'select_field') %>
    </div>
  </div>
   
  <div class="control-group">
    <%= f.label :password, :class => 'control-label' %>
    <div class="controls">
      <%= f.password_field :password, :class => 'text_field' %>
    </div>
  </div>
  
  <div class="control-group">
    <%= f.label :password_confirmation, :class => 'control-label' %>
    <div class="controls">
      <%= f.password_field :password_confirmation, :class => 'text_field' %>
    </div>
  </div>
  
  <div class="form-actions">
  	<div><%= f.submit "Sign up", :class => 'btn btn-primary'%></div>
  </div>
<% end %>

<script type="text/javascript">
  $(document).ready(function(){
  	$("#new_user").submit(function(){
  		if ($("#secrate_code_secrate_code").val() == ""){
  			alert("Please select your secrate code.")
  			return false;
  		}
  	});
  });
</script>
